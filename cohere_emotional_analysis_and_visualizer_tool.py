# -*- coding: utf-8 -*-
"""Cohere Emotional Analysis and Visualizer Tool.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1Qhgh2AomHAFIsuhviy-Yx6c_NmC-fKI5
"""

pip install cohere

import cohere
from cohere.responses.classify import Example
co = cohere.Client('aYH3xW1ZGKbvJDVr171DH9dt7CX93iLg3Mp94zyC') # This is your trial API key
def predict_data(post):
    response = co.classify(
    model='embed-multilingual-v2.0',
    inputs=[post], 
    examples=[Example("i feel like thats petty so i convince myself that i dont give a shit", "anger"), Example("i really have much of a clue how my ex actually feels or felt about anything really except that he hated it when i didnt screw the lids back on jars in the kitchen", "anger"), Example("i don t know this shit happens but every time i find out about yet another secret makeshift graveyard full of women s bones i feel that enraged impotence just like it was the first time", "anger"), Example("i do not feel outraged by the change in name changing tanjore to thanjavur and mysore to mysuru makes more sense but since the previous cities were named by the very people who made them what they are today from mere villages to major power centres it s not a crime to retain those names", "anger"), Example("i feel rude taking pictures of them", "anger"), Example("i feel complimented or insulted", "anger"), Example("i feel grumpy i am short with my wife or children", "anger"), Example("i got a feeling that it was rushed to", "anger"), Example("i feel tortured being away from my baby", "anger"), Example("im feeling kind of petty and selfish", "anger"), Example("i can not help but feel distraught about it", "fear"), Example("im trying to wein off them with doctors guidance of course but if i miss a day i feel agitated about everything", "fear"), Example("i had struggled through a difficult pregnancy i was feeling apprehensive and excited at the same time about the soon to be newest member of our family", "fear"), Example("i was feeling much more agitated than usual had difficulties sleeping and constantly required my parents presence", "fear"), Example("i feel alarmed her fingers gripping tight i see her pleading eyes so i start to disguise and say that everythings alright", "fear"), Example("ive filled in some of the holes beneath my desk with foil as i feel distressed by the idea of losing one of my sewing machine feet or the bobbin case down there", "fear"), Example("i have been feeling extraordinarily indecisive about which innocent crush fabrics i love the most", "fear"), Example("im betraying my youth and class origins here but the working world still feels very strange to me", "fear"), Example("i really forgot how it feels to laugh sincerely and he is the one who make my sincere laughter come back", "joy"), Example("i viewed back the new year card that you presented me i can feel your sincere", "joy"), Example("i have stayed at heritage christian because of the fulfillment that i feel in doing christ s work in action by being the hands the eyes the legs and the voice of supporting the individuals that i have been blessed to know and support", "joy"), Example("i was looking at her and leaning a bit forward feeling really keen on to her", "joy"), Example("i expected to feel more but nope i dont and thats a pleasant surprise", "joy"), Example("im feeling a little better and with more christmas spirit i thought that by this date id had all my christmas decorations up but im not finish even with the lights", "joy"), Example("i feel the cool water on my skin and the sun hugging me in warm comfort", "joy"), Example("i am feeling all nostalgic i went on pinterest and found some great looking recipes for tomatoes and had to share a href http media cache ec", "love"), Example("i feel like im supporting a community that i love with each purchase", "love"), Example("i feel gracious what about you", "love"), Example("i feel your delicate fingers", "love"), Example("i get really frustrated whenever i talk with them i also feel compassionate toward them because they believe so passionately in things that are just dead wrong and frankly dont make sense", "love"), Example("i don t need to drop feelings like a hot potato or slam the door shut on them", "love"), Example("i worked as an editor and part of my job was to reject manuscripts i hated it because in those cover letters i could feel the writer s anticipation and longing", "love"), Example("i feel sympathetic to the dalai lama", "love"), Example("im feeling a bit needy i keep thinking i would appreciate any attention but of course that is not true", "sadness"), Example("i feel discouraged and realize face palm that i need to look at things with a different perspective to be grateful about anything i can find", "sadness"), Example("ill just cut amp paste it next time i feel the urge to type something as whiney as that", "sadness"), Example("i got a sore throat then a runny nose then a full blown congested head cold which fell on the bank holiday tuesday and has left me feeling low and blue and bleurgh since then", "sadness"), Example("im dealing with issues that have me feeling kind of depressed and it stormed rained all afternoon not helping things", "sadness"), Example("i am talking purely about feeling here but i just didnt feel that emotional when the boy was killed", "sadness"), Example("i do love the idea of having slave brothers but not at expense that i feel ignored lonely and frustrated and so depressed", "sadness"), Example("i feel terrible about it though because i know how much courage it takes to ask", "sadness"), Example("i like the domestic scene salty sweet combos recipe reviews the smell of rosemary babies the feeling of having exercised hand clapping rhymes books lost teacups and laundry that has been washed dried folded and put away", "sadness"), Example("i just started taking mine yesterday and i feel kinda funny", "surprise"), Example("i didnt feel like explaining to her that im genuinely curious and want to learn and understand and at least have some idea of what people are saying to me", "surprise"), Example("i left gastro feeling impressed", "surprise"), Example("i really did not feel so impressed with houston when i came here last time", "surprise"), Example("i feel amazed when i saw the final result even thos without fishes inside", "surprise"), Example("i told my colleagues in the qa team that after knowing almost everything in the floor back when i was an agent now i feel like im a kid curious of almost everything", "surprise"), Example("i think it is the worst feeling it gives me the shivers and just thinking about it makes my teeth feel strange", "surprise")])
    return response.classifications[0]

def classify_emotion(post):
    emo_group=predict_data(post)
    return emo_group.prediction

classify_emotion('I am happpy')

def write_post(post):
  emotion=classify_emotion(post)
  response = co.generate(
  model='command-light',
  prompt=f'Using sentiment analysis, we want to generate a personalized response to a social media post. Given the following post: {post}, generate a response that matches the emotion of the post which is and provides encouragement. Also, given the following post: {post}, generate a response that matches the emotion of the post and provides comfort or encouragement ro advise as the case may be.',
  max_tokens=626,
  temperature=0.6,
  k=0,
  stop_sequences=["NONE"],
  return_likelihoods='NONE')
  return response.generations[0].text

import pandas as pd
import matplotlib.pyplot as plt

def plotter(post):    
    dataF=predict_data(post)
    df=pd.DataFrame.from_dict(dataF.labels)
    df.plot(kind='bar')
    plt.show()
